<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Doop</title>
	<link rel="stylesheet" href="styles.css">
	<script>
		const fonts = [
			'Arial',
			'Verdana',
			'Tahoma',
			'Trebuchet MS',
			'Times New Roman',
			'Georgia',
			'Garamond',
			'Courier New',
			'Brush Script MT',
			'Comic Sans MS',
			'Impact',
			'Lucida Console',
			'Monaco',
            // google fonts |
            //              V 
			'Pacifico', 
			'Lobster', 
			'Indie Flower', 
			'Bangers', 
			'Orbitron', 
			'Oswald',
			'Roboto', 
			'Montserrat', 
		];

		function pickRandomFont() {
			return fonts[Math.floor(Math.random() * fonts.length)];
		}

		function loadGoogleFont(font) {
			const googleFonts = {
				'Pacifico': 'Pacifico',
				'Lobster': 'Lobster',
				'Indie Flower': 'Indie+Flower',
				'Bangers': 'Bangers',
				'Orbitron': 'Orbitron',
				'Oswald': 'Oswald',
				'Roboto': 'Roboto',
				'Montserrat': 'Montserrat',
			};
			if (googleFonts[font]) {
				const link = document.createElement('link');
				link.rel = 'stylesheet';
				link.href = `https://fonts.googleapis.com/css?family=${googleFonts[font]}&display=swap`;
				document.head.appendChild(link);
			}
		}

		//letters to spans
		function wrapChars(node) {
			if (
				node.nodeType === Node.TEXT_NODE &&
				node.textContent.trim().length > 0 &&
				node.parentNode.nodeName !== 'SCRIPT' &&
				node.parentNode.nodeName !== 'STYLE'
			) {
				const frag = document.createDocumentFragment();
				for (const char of node.textContent) {
					const span = document.createElement('span');
					span.textContent = char;
					frag.appendChild(span);
				}
				node.parentNode.replaceChild(frag, node);
			} else if (node.nodeType === Node.ELEMENT_NODE && node.nodeName !== 'SCRIPT' && node.nodeName !== 'STYLE' && node.nodeName !== 'IMG') {
				[...node.childNodes].forEach(wrapChars);
			}
		}

		window.addEventListener('DOMContentLoaded', () => {
			const font = pickRandomFont();
			loadGoogleFont(font);
			const centerText = document.querySelector('.center-text');
			centerText.style.fontFamily = `'${font}', sans-serif`;
			if (font === 'Pacifico') {
				centerText.style.top = '1%';
			}
			if (font === 'Lobster') {
				centerText.style.top = '3%';
			}

			wrapChars(document.body);
            document.querySelectorAll('span').forEach(span => {
                if (span.children.length === 0) { 
                    span.addEventListener('mouseenter', function() {
                        this.classList.add('yellowed');
                    });
                }
            });

            document.querySelectorAll('.resizable').forEach(resizable => {
                const resizer = resizable.querySelector('.resizer');
                let isResizing = false, startX, startY, startWidth, startHeight;
                const originalWidth = resizable.offsetWidth;
                const originalHeight = resizable.offsetHeight;

                resizer.addEventListener('mousedown', function(e) {
                    e.preventDefault();
                    isResizing = true;
                    startX = e.clientX;
                    startY = e.clientY;
                    startWidth = resizable.offsetWidth;
                    startHeight = resizable.offsetHeight;
                    document.body.style.userSelect = 'none';
                });

                document.addEventListener('mousemove', function(e) {
                    if (!isResizing) return;
                    const newWidth = Math.max(40, startWidth + (e.clientX - startX));
                    const newHeight = Math.max(40, startHeight + (e.clientY - startY));
                    resizable.style.width = newWidth + 'px';
                    resizable.style.height = newHeight + 'px';
                });

                document.addEventListener('mouseup', function() {
                    if (isResizing) {
                        isResizing = false;
                        document.body.style.userSelect = '';
                        resizable.style.transition = 'width 0.2s, height 0.2s';
                        resizable.style.width = originalWidth + 'px';
                        resizable.style.height = originalHeight + 'px';
                        resizable.classList.remove('wobbling'); 
                        void resizable.offsetWidth; 
                        resizable.classList.add('wobbling');
                        setTimeout(() => {
                            resizable.style.transition = '';
                            resizable.classList.remove('wobbling');
                        }, 600);
                    }
                });
            });
		});
	</script>
</head>
<body>
	<div class="center-text" id="doop-text">
        doop
    </div>
    <div class="center-row" style="top: 25%;">
        <a href="https://github.com/yellowkirby113" class="yellow-text" style="font-size: 1.5rem; text-decoration: underline; color: #ffd600;">
            yellowkirby113
        </a>
    </div>
    <div class="center-row">
        <span class="yellow-text">hello</span>
        <img src="wave.png" alt="wave" class="wave-hand" />
    </div>
    <div class="center-row" style="top: 40%;">
        <span class="yellow-text" style="font-size: 1.5rem;">this is my webpage about my stuff</span>
    </div>
    <div class="center-row" style="top: 40%;">
        <span class="yellow-text" style="font-size: 1.5rem;">this is my webpage about my stuff</span>
    </div>
    <div class="center-row" style="left: 15%; top: 15%;">
        <div class="resizable">
            <img src="car.gif" id="car-gif-1"/>
            <div class="resizer"></div>
        </div>
    </div>
    <div class="center-row" style="top: 55%; left: 25%;">
        <img src="balIcon.png"/>
        <span class="yellow-text" style="font-size: 1.5rem;">Petricor V</span>
    </div>
    <div class="center-row" style="top: 70%; left: 25%;">
        <span class="yellow-text" style="font-size: 1.5rem; top: 50%;left: 25%;">A balatro mod that incorporates Risk of rain 2</span>      
    </div>
    <div class="center-row" style="top: 100%;">
        <div class="resizable">
            <img src="car.gif" id="car-gif-2"/>
            <div class="resizer"></div>
        </div>
    </div>
</body>
</html>
