<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Doop</title>
	<link rel="stylesheet" href="styles.css">
	<script>
		const fonts = [
			'Arial',
			'Verdana',
			'Tahoma',
			'Trebuchet MS',
			'Times New Roman',
			'Georgia',
			'Garamond',
			'Courier New',
			'Brush Script MT',
			'Comic Sans MS',
			'Impact',
			'Lucida Console',
			'Monaco',
            // google fonts |
            //              V 
			'Pacifico', 
			'Lobster', 
			'Indie Flower', 
			'Bangers', 
			'Orbitron', 
			'Oswald',
			'Roboto', 
			'Montserrat', 
		];

		function pickRandomFont() {
			return fonts[Math.floor(Math.random() * fonts.length)];
		}

		function loadGoogleFont(font) {
			const googleFonts = {
				'Pacifico': 'Pacifico',
				'Lobster': 'Lobster',
				'Indie Flower': 'Indie+Flower',
				'Bangers': 'Bangers',
				'Orbitron': 'Orbitron',
				'Oswald': 'Oswald',
				'Roboto': 'Roboto',
				'Montserrat': 'Montserrat',
			};
			if (googleFonts[font]) {
				const link = document.createElement('link');
				link.rel = 'stylesheet';
				link.href = `https://fonts.googleapis.com/css?family=${googleFonts[font]}&display=swap`;
				document.head.appendChild(link);
			}
		}

		//letters to spans
		function wrapChars(node) {
			if (
				node.nodeType === Node.TEXT_NODE &&
				node.textContent.trim().length > 0 &&
				node.parentNode.nodeName !== 'SCRIPT' &&
				node.parentNode.nodeName !== 'STYLE'
			) {
				const frag = document.createDocumentFragment();
				for (const char of node.textContent) {
					const span = document.createElement('span');
					span.textContent = char;
					frag.appendChild(span);
				}
				node.parentNode.replaceChild(frag, node);
			} else if (node.nodeType === Node.ELEMENT_NODE && node.nodeName !== 'SCRIPT' && node.nodeName !== 'STYLE' && node.nodeName !== 'IMG') {
				[...node.childNodes].forEach(wrapChars);
			}
		}

		window.addEventListener('DOMContentLoaded', () => {
			const font = pickRandomFont();
			loadGoogleFont(font);
			const centerText = document.querySelector('.center-text');
			centerText.style.fontFamily = `'${font}', sans-serif`;
			if (font === 'Pacifico') {
				centerText.style.top = '1%';
			}
			if (font === 'Lobster') {
				centerText.style.top = '3%';
			}

			wrapChars(document.body);
            document.querySelectorAll('span').forEach(span => {
                if (span.children.length === 0) { 
                    span.addEventListener('mouseenter', function() {
                        this.classList.add('yellowed');
                    });
                }
            });

            document.querySelectorAll('.resizable').forEach(resizable => {
                const resizer = resizable.querySelector('.resizer');
                let isResizing = false, startX, startY, startWidth, startHeight;

                // Store original size
                const originalWidth = resizable.offsetWidth;
                const originalHeight = resizable.offsetHeight;

                resizer.addEventListener('mousedown', function(e) {
                    e.preventDefault();
                    isResizing = true;
                    startX = e.clientX;
                    startY = e.clientY;
                    startWidth = resizable.offsetWidth;
                    startHeight = resizable.offsetHeight;
                    document.body.style.userSelect = 'none';
                });

                document.addEventListener('mousemove', function(e) {
                    if (!isResizing) return;
                    const newWidth = Math.max(40, startWidth + (e.clientX - startX));
                    const newHeight = Math.max(40, startHeight + (e.clientY - startY));
                    resizable.style.width = newWidth + 'px';
                    resizable.style.height = newHeight + 'px';
                });

                document.addEventListener('mouseup', function() {
                    if (isResizing) {
                        isResizing = false;
                        document.body.style.userSelect = '';
                        // Snap back to original size
                        resizable.style.transition = 'width 0.2s, height 0.2s';
                        resizable.style.width = originalWidth + 'px';
                        resizable.style.height = originalHeight + 'px';
                        // Trigger wobble after transition
                        setTimeout(() => {
                            resizable.style.transition = '';
                            resizable.classList.remove('wobbling');
                            void resizable.offsetWidth; // force reflow
                            resizable.classList.add('wobbling');
                            setTimeout(() => {
                                resizable.classList.remove('wobbling');
                            }, 600);
                        }, 200);
                    }
                });
            });

            // Make car.gif draggable
            document.querySelectorAll('.draggable-car').forEach(car => {
                let isDragging = false, offsetX = 0, offsetY = 0, parentRect = null;

                car.addEventListener('mousedown', function(e) {
                    if (e.target.classList.contains('resizer')) return;
                    isDragging = true;
                    car.classList.add('dragging');
                    // Get parent position
                    parentRect = car.parentElement.getBoundingClientRect();
                    const rect = car.getBoundingClientRect();
                    offsetX = e.clientX - rect.left;
                    offsetY = e.clientY - rect.top;
                    car.style.zIndex = 1000;
                });

                document.addEventListener('mousemove', function(e) {
                    if (!isDragging) return;
                    // Calculate position relative to parent
                    const x = e.clientX - parentRect.left - offsetX;
                    const y = e.clientY - parentRect.top - offsetY;
                    car.style.left = x + 'px';
                    car.style.top = y + 'px';
                });

                document.addEventListener('mouseup', function() {
                    if (isDragging) {
                        isDragging = false;
                        car.classList.remove('dragging');
                        car.style.zIndex = 10;
                    }
                });
            });
		});

		window.addEventListener('scroll', function() {
			const gradient = document.querySelector('.bottom-gradient');
			if (!gradient) return;
			if (window.scrollY > 10) {
				gradient.classList.add('hide');
			} else {
				gradient.classList.remove('hide');
			}
		});
	</script>
</head>
<body>
	<div class="center-text" id="doop-text">
        doop
    </div>
    <div class="center-row" style="top: 25%;">
        <a href="https://github.com/yellowkirby113" class="yellow-text" style="font-size: 1.5rem; text-decoration: underline; color: #ffd600;">
            yellowkirby113
        </a>
    </div>
    <div class="center-row">
        <span class="yellow-text">hello</span>
        <img src="wave.png" alt="wave" class="wave-hand" />
    </div>
    <div class="center-row" style="top: 40%;">
        <span class="yellow-text" style="font-size: 1.5rem;">this is my webpage about my stuff</span>
    </div>
        <div class="center-row" style="top: 55%; left: 75%;">
        <div class="petricor-box">
            <div class="petricor-header">
                <img src="icon.png" class="logo"/>
                <span class="yellow-text" style="font-size: 2rem;">
                    <a href="https://yellowkirby113.github.io/" class="yellow-text" style="font-size: 2rem; text-decoration: underline; color: #ffffff;">???????</a>
                </span>
            </div>
            <div class="petricor-desc">
                ???????
            </div>
        </div>
    </div>
        <div class="center-row" style="top: 55%; left: 25%;">
        <div class="petricor-box">
            <div class="petricor-header">
                <img src="balIcon.png" class="logo"/>
                <span class="yellow-text" style="font-size: 2rem;">
                    <!--<a href="https://github.com/yellowkirby113/Risk-of-jokes-Balatro-mod" class="yellow-text" style="font-size: 2rem; text-decoration: underline; color: #ffffff;">Petricor V</a>-->
                    <a href="PV/index.html" class="yellow-text" style="font-size: 2rem; text-decoration: underline; color: #ffffff;">Petricor V</a>
                </span>
            </div>
            <div class="petricor-desc">
                A balatro mod that incorporates Risk of rain 2
            </div>
        </div>
    </div>
    <div class="center-row" style="top: 80%; left: 75%;">
        <div class="petricor-box">
            <div class="petricor-header">
                <img src="icon.png" class="logo"/>
                <span class="yellow-text" style="font-size: 2rem;">
                    // <a href="https://yellowkirby113.github.io/PV/" class="yellow-text" style="font-size: 2rem; text-decoration: underline; color: #ffffff;">???????</a>
                </span>
            </div>
            <div class="petricor-desc">
                ???????
            </div>
        </div>
    </div>
    <div class="center-row" style="top: 80%; left: 25%;">
        <div class="petricor-box">
            <div class="petricor-header">
                <img src="icon.png" class="logo"/>
                <span class="yellow-text" style="font-size: 2rem;">
                    <a href="https://github.com/yellowkirby113/" class="yellow-text" style="font-size: 2rem; text-decoration: underline; color: #ffffff;">???????</a>
                </span>
            </div>
            <div class="petricor-desc">
                ???????
            </div>
        </div>
    </div>
    <div class="center-row" style="top: 110%;">
        <span class="yellow-text" style="font-size: 1.5rem;"></span>
    </div>
	<div class="center-text" style="top: 150%;">
        doop
    </div>
    <div>
    <div class="center-row" style="left: 15%; top: 15%; transform: none;">
        <div class="resizable">
            <img src="car.gif" id="car-gif-1"/>
            <div class="resizer"></div>
        </div>
    </div>
    <div class="bottom-gradient">
        <div class="down-arrow">&#8595;</div>
    </div>
</body>
</html>
